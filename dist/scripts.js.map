{"version":3,"sources":["scripts.js"],"names":["window","NodeList","prototype","forEach","callback","thisArg","i","length","call","drupalSettings","olivero","IntersectionObserverEntry","monitorNavPosition","primaryNav","document","querySelector","options","rootMargin","threshold","observer","IntersectionObserver","toggleDesktopNavVisibility","observe","entries","isDesktopNav","entry","intersectionRatio","fixables","el","classList","add","remove","navButtons","getComputedStyle","getPropertyValue","wideNavIsOpen","wideNavButton","getAttribute","showWideNav","setAttribute","siteHeaderToggleElement","hideWideNav","querySelectorAll","addEventListener","e","keyCode"],"mappings":"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","sourcesContent":["if (window.NodeList && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = function (callback, thisArg) {\n    thisArg = thisArg || window;\n    for (var i = 0; i < this.length; i++) {\n      callback.call(thisArg, this[i], i, this);\n    }\n  };\n}\n\n(function() {\n  window.drupalSettings = {};\n  window.drupalSettings.olivero = {};\n  if ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n\n\n\n\n\n  const fixables = document.querySelectorAll('.fixable')\n\n  function monitorNavPosition() {\n    const primaryNav = document.querySelector('.site-header');\n    const options = {\n      rootMargin: '72px',\n      threshold: [0.999, 1]\n    }\n\n    const observer = new IntersectionObserver(toggleDesktopNavVisibility, options);\n    observer.observe(primaryNav);\n  }\n\n  function toggleDesktopNavVisibility(entries) {\n    if (!isDesktopNav()) return;\n\n    entries.forEach(entry => {\n      // FF doesn't seem to support entry.isIntersecting properly,\n      // so we check the intersectionRatio.\n      if (entry.intersectionRatio < 1) {\n        fixables.forEach(el => el.classList.add('js-fixed'));\n      }\n      else {\n        fixables.forEach(el => el.classList.remove('js-fixed'));\n      }\n    });\n  }\n\n  function isDesktopNav() {\n    const navButtons = document.querySelector('.mobile-buttons');\n    return window.getComputedStyle(navButtons).getPropertyValue('display') === 'none';\n  }\n\n  drupalSettings.olivero.isDesktopNav = isDesktopNav;\n\n  monitorNavPosition();\n\n  // Toggle desktop nav visibility when scrolled down.\n  const wideNavButton = document.querySelector('.nav-primary__button');\n  const siteHeaderToggleElement = document.querySelector('.site-header__inner');\n\n  function wideNavIsOpen() {\n    return wideNavButton.getAttribute('aria-pressed') === 'true';\n  }\n\n  wideNavButton.addEventListener('click', () => {\n    if (!wideNavIsOpen()) {\n      showWideNav();\n    }\n    else {\n      hideWideNav();\n    }\n  });\n\n  function showWideNav() {\n    wideNavButton.setAttribute('aria-pressed', 'true');\n    siteHeaderToggleElement.setAttribute('aria-expanded', 'true');\n  }\n\n  // Resets the wide nav button to be closed (it's default state).\n  function hideWideNav() {\n    wideNavButton.setAttribute('aria-pressed', 'false');\n    siteHeaderToggleElement.setAttribute('aria-expanded', 'false');\n  }\n\n  siteHeaderToggleElement.addEventListener('focusin', showWideNav);\n\n  document.addEventListener('keyup', e => {\n    if (e.keyCode === 27) {\n      hideWideNav();\n    }\n  });\n}\n})();\n"],"file":"scripts.js"}